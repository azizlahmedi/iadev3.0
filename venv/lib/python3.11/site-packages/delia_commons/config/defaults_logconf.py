# Do not forget to add the filename for handfile handlers
defaults_logconf = dict(
    version=1,
    formatters={
        'formfile': {
            'format': "{'date': '%(asctime)s', 'msg': '%(message)s', 'values': {'pathname': '%(pathname)s:%(lineno)d'}, 'level': '%(levelname)s', 'Process ID': '%(process)d'}"
        },
        'formconsole': {
            'format': '%(message)s'
        }
    },
    filters={
        'dynamic_error_filter': {
            '()': 'delia_commons.log_filter.ErrorFilter'
        }
    },
    handlers={
        'handfile': {
            'class': 'logging.FileHandler',
            'level': 'INFO',
            'filters': ['dynamic_error_filter'],
            'formatter': 'formfile'
        },
        'handconsole': {
            'class': 'logging.StreamHandler',
            'level': 'WARN',
            'formatter': 'formconsole',
            'filters': ['dynamic_error_filter'],
            'stream': 'ext://sys.stderr'
        }
    },
    loggers={
        'delia.commons': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile']
        },
        'delia.tokenizer': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile', 'handconsole']
        },
        'delia.parser': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile', 'handconsole']
        },
        'delia.preprocessor.include': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile', 'handconsole']
        },
        'delia.preprocessor.macro': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile', 'handconsole']
        },
        'delia.ast': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile']
        },
        'delia.codegen': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile', 'handconsole']
        },
        'delia.validation': {
            'level': 'WARNING',
            'propagate': False,
            'handlers': ['handfile', 'handconsole']
        }
    }
)
