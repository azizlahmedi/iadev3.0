# -*- coding: utf-8 -*-

from .macro import scan_macro
from .include import scan_include
from .iterator import fill, filter
from .provider import FileProvider
from .provider import StringProvider


def scan(scanner, path, provider=FileProvider(), files=[], acros={}):
    '''Scan all'''
    return filter(
        scan_macro(
            scan_include(
                fill(scanner),
                path,
                provider=provider,
                files=files,
                stack=[],
                include=None),
            acros=acros,
            files=files,
            stack=[]))
