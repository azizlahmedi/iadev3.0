# -*- coding: utf-8 -*-
import os
import tempfile
import unittest

from delia_mlg.backends import ConfigBackend


class TestConfigBackend(unittest.TestCase):
    def test(self):
        with tempfile.TemporaryDirectory() as tmp:
            config_path = os.path.join(tmp, 'test.cfg')
            with open(config_path, 'w', encoding='utf-8') as fd:
                fd.write('''
[REDIS]
url = redis://chardon:6379/2

[SUBVERSION]
checkout = /workspace/src/sandbox/mlg
username = toto
password = tata
''')
            config_backend = ConfigBackend(config_path)
            self.assertEqual('redis://chardon:6379/2', config_backend.redis_url)
            self.assertEqual('/workspace/src/sandbox/mlg', config_backend.svn_checkout)
            self.assertEqual('toto', config_backend.svn_username)
            self.assertEqual('tata', config_backend.svn_password)


if __name__ == '__main__':
    unittest.main()
