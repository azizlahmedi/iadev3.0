# -*- coding: utf-8 -*-
import os
import tempfile
import unittest

from delia_mlg.backends import UntranslatedBackend, SanityBackend


class TestUntranslateBackend(unittest.TestCase):
    def test_untranslated(self):
        with tempfile.TemporaryDirectory() as tmp:
            path = os.path.join(tmp, 'untranslated.csv')
            with open(path, 'w', encoding='utf-8') as fd:
                fd.write('''
newport_gesenv_saienv,fr,"Mise a jour effectuee"
''')
            data = UntranslatedBackend(SanityBackend()).walk(tmp)
            self.assertEqual({'newport.gesenv.saienv': {'Mise a jour effectuee'}}, data)


if __name__ == '__main__':
    unittest.main()
