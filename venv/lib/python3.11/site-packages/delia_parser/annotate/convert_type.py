from functools import wraps


def convert_type(visitor_func):

    @wraps(visitor_func)
    def wrapper(self, node):

        if node.conversion_types:

            for form in node.conversion_types:
                self.visit(form)

            result = visitor_func(self, node)

        else:
            result = visitor_func(self, node)

        return result
    return wrapper
